import{d as G,u as H,r as a,G as K,c as q,g as J,e as P,H as Q,f as U,h as i,i as t,t as r,j as s,x as $,m as M,F as T,p as F,q as I,w as m,s as l,I as W,J as X,k as E,R as h,y as Y,z as Z,A as ee,B as te,C as se,D as oe,E as le}from"./index-4d0be3dc.js";import{_ as ae}from"./chevron-back-outline-221160d9.js";import{_ as ie}from"./wifi_off-856a1c9a.js";const c=k=>(Y("data-v-b33f3615"),k=k(),Z(),k),ne={class:"menu"},ce={class:"title"},_e={class:"title--center"},re=["src"],ue={key:0,class:"fallback-container"},de=c(()=>t("img",{class:"wifi-fallback",src:ie},null,-1)),ve=[de],pe={key:1,class:"main-content"},me={key:0},he={class:"topic-title"},ke={class:"song__title"},fe={class:"booktext--right"},be={class:"song__number"},ge={class:"song-list"},ye=["onClick"],xe={class:"topic-title"},we={key:1,class:"song-list"},Te={class:"song__title"},$e={class:"booktext--right"},Ie={class:"song__number"},Ae={class:"nav"},Ce=c(()=>t("img",{class:"ionicon nav__icon--active",src:ee},null,-1)),Se=c(()=>t("span",{class:"nav__text"},"Home",-1)),Be=c(()=>t("img",{class:"ionicon nav__icon",src:te},null,-1)),Fe=c(()=>t("span",{class:"nav__text"},"Search",-1)),De=c(()=>t("img",{class:"ionicon nav__icon",src:se},null,-1)),Oe=c(()=>t("span",{class:"nav__text"},"Bookmarks",-1)),Ve=c(()=>t("img",{class:"ionicon nav__icon",src:oe},null,-1)),Me=c(()=>t("span",{class:"nav__text"},"Settings",-1)),Ee=G({__name:"TopicalIndexView",props:{book:{}},setup(k){const f=k,L=H(),_=a(!0),D=a(!1),N=a(null);let A=a(""),b=a("#FFFFFF"),C=a("#000000"),u=a({}),d=a(""),v=null,g=null;const O=K(()=>p.value?B.value:d.value in u.value?u.value[d.value]:[]);q(async()=>{g=await J(),v=await P(f.book),A.value=g[f.book].name.short,b.value=g[f.book].primaryColor,C.value=g[f.book].secondaryColor;const w=await Q(g[f.book].name.short);if(w==null||v==null){D.value=!0;return}for(let[o,e]of Object.entries(w)){u.value[o]=[];for(let n of e)u.value[o].push({number:n,title:v[n].title,notes:v[n].notes});u.value[o].sort((n,V)=>n.title.replace(/[.,/#!$%^&*;:{}=\-_'"`~()]/g,"").localeCompare(V.title.replace(/[.,/#!$%^&*;:{}=\-_'"`~()]/g,"")))}for(const o of Object.keys(v)){let e=v[o];B.value.push({title:(e==null?void 0:e.title)??"",number:o,notes:e==null?void 0:e.notes,first_line:e==null?void 0:e.first_line})}B.value.sort((o,e)=>o.title.replace(/[.,/#!$%^&*;:{}=\-_'"`~()]/g,"").localeCompare(e.title.replace(/[.,/#!$%^&*;:{}=\-_'"`~()]/g,""))),p.value?(y.value="Alphabetical Index",x.value="../assets/list-bulleted.svg"):(y.value="Topical Index",x.value="../assets/text.svg")});function j(w){_.value?(_.value=!1,d.value=w,setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},10)):S()}function S(){_.value=!0,d.value="",setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},10)}function R(){_.value?L.back():S()}let p=U("isAlphabetical",!1);const B=a([]);let y=a("Topical Index"),x=a("../assets/text.svg");function z(){p.value=!p.value,p.value?(y.value="Alphabetical Index",x.value="../assets/list-bulleted.svg"):(y.value="Topical Index",x.value="../assets/text.svg"),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},10)}return(w,o)=>(l(),i(T,null,[t("div",ne,[t("div",ce,[t("img",{onClick:o[0]||(o[0]=e=>R()),class:"ionicon title--left",src:ae}),t("h1",_e,r(s(y)),1),t("img",{onClick:o[1]||(o[1]=e=>z()),class:"ionicon title--right",src:s(x)},null,8,re)])]),D.value?(l(),i("div",ue,ve)):(l(),i("div",pe,[s(p)?(l(),i("div",we,[(l(!0),i(T,null,F(O.value,e=>(l(),E(s(h),{key:e.title+e.number,to:`/display/${s(A)}/${e.number}`,class:"song topic-song",style:$(`background: linear-gradient(135deg, ${s(b)}, ${s(C)})`)},{default:m(()=>[t("div",null,[t("div",Te,r(e.title),1)]),t("div",$e,[t("div",Ie,"#"+r(e.number),1)])]),_:2},1032,["to","style"]))),128))])):(l(),i("div",me,[t("div",{ref_key:"scroll_topic_list",ref:N},[_.value?M("",!0):(l(),i("div",{key:s(d),class:"topic",style:$({background:s(b)}),onClick:S},[t("h3",he,r(s(d)),1)],4))],512),(l(!0),i(T,null,F(O.value,e=>W((l(),E(s(h),{key:e.title+e.number,to:`/display/${s(A)}/${e.number}`,class:"song topic-song",style:$(`background: linear-gradient(135deg, ${s(b)}, ${s(C)})`)},{default:m(()=>[t("div",null,[t("div",ke,r(e.title),1)]),t("div",fe,[t("div",be,"#"+r(e.number),1)])]),_:2},1032,["to","style"])),[[X,!_.value]])),128)),t("div",ge,[(l(!0),i(T,null,F(s(u),(e,n)=>(l(),i(T,{key:n},[_.value?(l(),i("div",{key:0,class:"topic expanded-topic",style:$({background:s(b)}),onClick:V=>j(n)},[t("h3",xe,r(n),1)],12,ye)):M("",!0)],64))),128))])]))])),t("nav",Ae,[I(s(h),{to:"/",class:"nav__link nav__link--active"},{default:m(()=>[Ce,Se]),_:1}),I(s(h),{to:"/search",class:"nav__link"},{default:m(()=>[Be,Fe]),_:1}),I(s(h),{to:"/bookmarks",class:"nav__link"},{default:m(()=>[De,Oe]),_:1}),I(s(h),{to:"/settings",class:"nav__link"},{default:m(()=>[Ve,Me]),_:1})])],64))}});const Re=le(Ee,[["__scopeId","data-v-b33f3615"]]);export{Re as default};
